<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head><meta charset="UTF‑8"><title>رصد الدرجات – البخاري</title></head>
<body>
  <h1>رصد الدرجات – حلقة الإمام البخاري</h1>
  <form id="gradesForm">
    <!-- تكرار لكل طالب -->
    <div>
      <span>محمد موسى محمد</span>
      <input name="page1" type="text" placeholder="صفحة" required>
      <input name="hadith1" type="text" placeholder="حديث" required>
      <input name="grade1" type="text" placeholder="درجة" required>
    </div>
    <button type="submit">حفظ الدرجات</button>
  </form>
  <script>
    const WEBAPP_URL = 'YOUR_WEBAPP_URL';
    document.getElementById('gradesForm').addEventListener('submit', e=>{
      e.preventDefault();
      const obj={};
      new FormData(e.target).forEach((v,k)=>obj[k]=v);
      fetch(WEBAPP_URL, {
        method:'POST', mode:'cors',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({
          type:'grades',
          halqa:'bukhari',
          data: obj
        })
      }).then(r=>r.json().then(j=>{
        alert(j.result==='success'? 'تم حفظ الدرجات':'خطأ: '+j.error);
      })).catch(err=>alert(err));
    });
  </script>
</body>
</html>
